import{m as C}from"./message-1ac97765.js";import{t as O,v as Q,a as W,b as X}from"./query-e21a8e02.js";import{d as Y,Z as ee,a as r,r as k,o as le,b as d,c as T,e as V,f as e,w as o,g as _,T as U,U as z,m as S,h as N}from"./index-07f16b63.js";const ae={class:"form"},te=V("h4",{class:"table-name"},"翻译查询:",-1),oe={class:"pagination"},de=Y({name:"translate",__name:"index",setup(ne){const h=ee(),g=r([]),R=r([]),B=r(!1),b=r([]),P=r([]),M=r(!1),p=r(1),c=r(10),D=r(!1),E=r(!1),F=r(!1),f=k({data:[],total:0}),t=k({originalText:"",translationText:"",isTranslation:"",projectId:h.query.projectId,fileId:h.query.fileId}),L=()=>{t.originalText="",t.translationText="",t.isTranslation="",t.projectId="",t.fileId="",R.value=[],P.value=[]},Z=n=>{n?Q({projectName:n}).then(a=>{if(a.code===0){const u=a.data;g.value=u.map(s=>({value:s.projectId,label:s.projectName}))}}):g.value=[]},$=n=>{n?W({projectId:t.projectId,fileName:n}).then(a=>{if(a.code===0){const u=a.data;b.value=u.map(s=>({value:s.fileId,label:s.fileName}))}}):b.value=[]},q=async n=>{X(n).then(a=>{a.code===0?C("修改翻译数据成功",{type:"success"}):C("修改翻译数据失败",{type:"error"})}),await m(p.value,c.value,t)},m=(n,a,u)=>O({pageNum:n,pageSize:a,...u}).then(s=>{f.data=s.data.records,f.total=s.data.total}),A=n=>{m(p.value,n,t)},G=n=>{m(n,c.value,t)},H=()=>{m(p.value,c.value,t)};return le(()=>{m(p.value,c.value,t)}),(n,a)=>{const u=d("el-option"),s=d("el-select"),i=d("el-form-item"),w=d("el-form"),x=d("el-input"),y=d("el-button"),I=d("el-card"),v=d("el-table-column"),J=d("el-table"),K=d("el-pagination");return _(),T("div",null,[V("div",ae,[e(I,null,{default:o(()=>[e(w,{inline:!0,class:"bg-bg_color w-[99/100] pl-8 pt-4"},{default:o(()=>[e(i,{label:"项目:"},{default:o(()=>[e(s,{modelValue:t.projectId,"onUpdate:modelValue":a[0]||(a[0]=l=>t.projectId=l),filterable:"",remote:"","reserve-keyword":"",placeholder:"请选择项目","remote-method":Z,loading:B.value},{default:o(()=>[(_(!0),T(U,null,z(g.value,l=>(_(),S(u,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),e(i,{label:"文件:"},{default:o(()=>[e(s,{modelValue:t.fileId,"onUpdate:modelValue":a[1]||(a[1]=l=>t.fileId=l),filterable:"",remote:"","reserve-keyword":"",placeholder:"请选择文件","remote-method":$,loading:M.value},{default:o(()=>[(_(!0),T(U,null,z(b.value,l=>(_(),S(u,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1})]),_:1}),e(w,{inline:!0,class:"bg-bg_color w-[99/100] pl-8 pt-4"},{default:o(()=>[e(i,{label:"原文：",prop:"originalText"},{default:o(()=>[e(x,{modelValue:t.originalText,"onUpdate:modelValue":a[2]||(a[2]=l=>t.originalText=l),placeholder:"输入查询原文",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),e(i,{label:"译文：",prop:"translationText"},{default:o(()=>[e(x,{modelValue:t.translationText,"onUpdate:modelValue":a[3]||(a[3]=l=>t.translationText=l),placeholder:"输入查询译文",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),e(i,{label:"翻译状态：",prop:"isTranslation"},{default:o(()=>[e(s,{modelValue:t.isTranslation,"onUpdate:modelValue":a[4]||(a[4]=l=>t.isTranslation=l),placeholder:"请选择状态",clearable:"",class:"!w-[180px]"},{default:o(()=>[e(u,{label:"已翻译",value:"true"}),e(u,{label:"未翻译",value:"false"})]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:o(()=>[e(y,{type:"primary",onClick:H},{default:o(()=>[N(" 搜索 ")]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(y,{type:"warning",onClick:L},{default:o(()=>[N(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1})]),e(I,null,{default:o(()=>[te,e(J,{data:f.data,style:{width:"100%"}},{default:o(()=>[e(v,{prop:"id",label:"id",width:"100"}),e(v,{prop:"originalText",label:"原文"}),e(v,{prop:"translationText",label:"原始译文"}),e(v,{prop:"translationText",label:"编辑译文"},{default:o(l=>[e(x,{autosize:{minRows:2,maxRows:4},modelValue:l.row.translationText,"onUpdate:modelValue":j=>l.row.translationText=j,type:"textarea",placeholder:"手动编辑译文",onChange:j=>q(l.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"]),V("div",oe,[e(K,{"current-page":p.value,"onUpdate:currentPage":a[5]||(a[5]=l=>p.value=l),"page-size":c.value,"onUpdate:pageSize":a[6]||(a[6]=l=>c.value=l),"page-sizes":[10,20,50,100],small:D.value,disabled:F.value,background:E.value,layout:"total, sizes, prev, pager, next, jumper",total:f.total,onSizeChange:A,onCurrentChange:G},null,8,["current-page","page-size","small","disabled","background","total"])])]),_:1})])}}});export{de as default};
