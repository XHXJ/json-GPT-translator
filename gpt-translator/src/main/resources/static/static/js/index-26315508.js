import{m as _}from"./message-ea151d7c.js";import{t as le,b as ae,c as te,v as oe,e as ne,g as re}from"./query-c0aecbc1.js";import{d as se,Z as de,a as d,r as k,o as ue,b as u,c as x,e as I,f as e,w as o,g as p,T as z,U as N,m as B,h as V,t as D}from"./index-f675a3d8.js";const ie={class:"form"},pe=I("h4",{class:"table-name"},"翻译查询:",-1),ce={key:0,style:{color:"red"}},me={key:1},ge={class:"pagination"},xe=se({name:"translate",__name:"index",setup(fe){const U=de(),y=d([]),F=d([]),P=d(!1),T=d([]),M=d([]),E=d(!1),c=d(1),m=d(10),O=d(!1),L=d(!1),Z=d(!1),h=k({data:[],total:0}),t=k({originalRegular:"",translationRegular:"",id:"",regular:"",originalText:"",translationText:"",isTranslation:"",projectId:U.query.projectId,fileId:U.query.fileId}),$=()=>{t.originalRegular="",t.translationRegular="",t.originalText="",t.translationText="",t.isTranslation="",t.projectId="",t.fileId="",t.id="",F.value=[],M.value=[]},g=k({value:[]}),q=()=>{if(g.value.length===0){_("请选择要翻译的数据",{type:"warning"});return}const n=g.value.map(l=>l.id);ae(n).then(l=>{l.code===0&&(_(l.data,{type:"success"}),C())})},A=n=>{g.value=n},G=()=>{if(g.value.length===0){_("请选择要删除的数据",{type:"warning"});return}const n=g.value.map(l=>l.id);te(n).then(l=>{l.code===0&&(_("删除成功",{type:"success"}),C())})},H=n=>{n?oe({projectName:n}).then(l=>{if(l.code===0){const i=l.data;y.value=i.map(r=>({value:r.projectId,label:r.projectName}))}}):y.value=[]},J=n=>{n?ne({projectId:t.projectId,fileName:n}).then(l=>{if(l.code===0){const i=l.data;T.value=i.map(r=>({value:r.fileId,label:r.fileName}))}}):T.value=[]},K=async n=>{re(n).then(l=>{l.code===0?_("修改翻译数据成功",{type:"success"}):_("修改翻译数据失败",{type:"error"})}),await v(c.value,m.value,t)},v=(n,l,i)=>le({pageNum:n,pageSize:l,...i}).then(r=>{h.data=r.data.records,h.total=r.data.total}),Q=n=>{v(c.value,n,t)},W=n=>{v(n,m.value,t)},C=()=>{v(c.value,m.value,t)};return ue(()=>{v(c.value,m.value,t)}),(n,l)=>{const i=u("el-option"),r=u("el-select"),s=u("el-form-item"),R=u("el-form"),f=u("el-input"),w=u("el-button"),X=u("el-popconfirm"),j=u("el-card"),b=u("el-table-column"),Y=u("el-table"),ee=u("el-pagination");return p(),x("div",null,[I("div",ie,[e(j,null,{default:o(()=>[e(R,{inline:!0,class:"bg-bg_color w-[99/100] pl-9 pt-4"},{default:o(()=>[e(s,{label:"项目:"},{default:o(()=>[e(r,{modelValue:t.projectId,"onUpdate:modelValue":l[0]||(l[0]=a=>t.projectId=a),filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入项目名","remote-method":H,loading:P.value},{default:o(()=>[(p(!0),x(z,null,N(y.value,a=>(p(),B(i,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),e(s,{label:"文件:"},{default:o(()=>[e(r,{modelValue:t.fileId,"onUpdate:modelValue":l[1]||(l[1]=a=>t.fileId=a),filterable:"",remote:"","reserve-keyword":"",placeholder:"请选输入文件名","remote-method":J,loading:E.value},{default:o(()=>[(p(!0),x(z,null,N(T.value,a=>(p(),B(i,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1})]),_:1}),e(R,{inline:!0,class:"bg-bg_color w-[99/100] pl-10 pt-4"},{default:o(()=>[e(s,{label:"id：",prop:"id"},{default:o(()=>[e(f,{modelValue:t.id,"onUpdate:modelValue":l[2]||(l[2]=a=>t.id=a),placeholder:"输入查询id",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),e(s,{label:"原文正则表达式：",prop:"originalRegular"},{default:o(()=>[e(f,{modelValue:t.originalRegular,"onUpdate:modelValue":l[3]||(l[3]=a=>t.originalRegular=a),placeholder:"输入正则表达式",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),e(s,{label:"译文正则表达式：",prop:"translationRegular"},{default:o(()=>[e(f,{modelValue:t.translationRegular,"onUpdate:modelValue":l[4]||(l[4]=a=>t.translationRegular=a),placeholder:"输入正则表达式",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1})]),_:1}),e(R,{inline:!0,class:"bg-bg_color w-[99/100] pl-6 pt-4"},{default:o(()=>[e(s,{label:"原文：",prop:"originalText"},{default:o(()=>[e(f,{modelValue:t.originalText,"onUpdate:modelValue":l[5]||(l[5]=a=>t.originalText=a),placeholder:"输入查询原文",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),e(s,{label:"译文：",prop:"translationText"},{default:o(()=>[e(f,{modelValue:t.translationText,"onUpdate:modelValue":l[6]||(l[6]=a=>t.translationText=a),placeholder:"输入查询译文",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),e(s,{label:"翻译状态：",prop:"isTranslation"},{default:o(()=>[e(r,{modelValue:t.isTranslation,"onUpdate:modelValue":l[7]||(l[7]=a=>t.isTranslation=a),placeholder:"请选择状态",clearable:"",class:"!w-[180px]"},{default:o(()=>[e(i,{label:"已翻译",value:"true"}),e(i,{label:"未翻译",value:"false"})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[e(w,{type:"primary",onClick:C},{default:o(()=>[V(" 搜索 ")]),_:1})]),_:1}),e(s,null,{default:o(()=>[e(w,{type:"warning",onClick:$},{default:o(()=>[V(" 重置 ")]),_:1})]),_:1}),e(s,null,{default:o(()=>[e(w,{type:"success",onClick:q},{default:o(()=>[V(" 批量单条翻译 ")]),_:1})]),_:1}),e(s,null,{default:o(()=>[e(X,{onConfirm:G,title:"删除 "+g.value.length+" 条数据?"},{reference:o(()=>[e(w,{type:"danger"},{default:o(()=>[V("删除")]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})]),_:1})]),e(j,null,{default:o(()=>[pe,e(Y,{data:h.data,style:{width:"100%"},onSelectionChange:A},{default:o(()=>[e(b,{type:"selection",width:"55"}),e(b,{prop:"id",label:"id",width:"100"},{default:o(a=>[a.row.id==t.id?(p(),x("div",ce,D(a.row.id),1)):(p(),x("div",me,D(a.row.id),1))]),_:1}),V(" > "),e(b,{prop:"originalText",label:"原文"}),e(b,{prop:"translationText",label:"原始译文"}),e(b,{prop:"translationText",label:"编辑译文"},{default:o(a=>[e(f,{autosize:{minRows:2,maxRows:4},modelValue:a.row.translationText,"onUpdate:modelValue":S=>a.row.translationText=S,type:"textarea",placeholder:"手动编辑译文",onChange:S=>K(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"]),I("div",ge,[e(ee,{"current-page":c.value,"onUpdate:currentPage":l[8]||(l[8]=a=>c.value=a),"page-size":m.value,"onUpdate:pageSize":l[9]||(l[9]=a=>m.value=a),"page-sizes":[10,20,50,100],small:O.value,disabled:Z.value,background:L.value,layout:"total, sizes, prev, pager, next, jumper",total:h.total,onSizeChange:Q,onCurrentChange:W},null,8,["current-page","page-size","small","disabled","background","total"])])]),_:1})])}}});export{xe as default};
