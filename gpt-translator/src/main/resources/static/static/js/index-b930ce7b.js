import{p as T}from"./query-e21a8e02.js";import{d as U,a as u,r as v,o as D,b as i,c as q,e as x,f as t,w as s,g as J,h as b,q as j,s as h,_ as M}from"./index-07f16b63.js";const R={class:"form"},A={class:"pagination"},G=U({name:"export",__name:"index",setup(H){const d=u(1),_=u(10),C=u(!1),w=u(!1),z=u(!1),p=v({projectName:""}),m=v({data:[],total:0}),k=a=>{j.get(`/api/translation-data/export-json?projects=${a}`,{responseType:"blob"}).then(e=>{var r;let o=e.headers["content-disposition"],l="translate.json";if(o){let c=(r=o.split("filename=")[1])==null?void 0:r.trim();c&&(l=c)}h(e.data,l)})},N=a=>{j.get(`/api/translation-data/export-excel?projects=${a}`,{responseType:"blob"}).then(e=>{var r;let o=e.headers["content-disposition"],l="translate.json";if(o){let c=(r=o.split("filename=")[1])==null?void 0:r.trim();c&&(l=c)}h(e.data,l)})},y=(a,e)=>{const o=a+e;return o===0?0:(e/o*100).toFixed(2)},S=()=>{f(d.value,_.value,p)},V=a=>{f(d.value,a,p)},F=a=>{f(a,_.value,p)},f=(a,e,o)=>T({pageNum:a,pageSize:e,...o}).then(l=>{m.data=l.data.records,m.total=l.data.total});return D(()=>{f(d.value,_.value,p)}),(a,e)=>{const o=i("el-input"),l=i("el-form-item"),r=i("el-button"),c=i("el-form"),g=i("el-table-column"),I=i("el-progress"),P=i("el-table"),$=i("el-pagination"),B=i("el-card");return J(),q("div",null,[x("div",R,[t(c,{ref:"formRef",inline:!0,model:p,class:"bg-bg_color w-[99/100] pl-8 pt-4"},{default:s(()=>[t(l,{label:"项目名称：",prop:"projectName"},{default:s(()=>[t(o,{modelValue:p.projectName,"onUpdate:modelValue":e[0]||(e[0]=n=>p.projectName=n),placeholder:"输入查询项目名称",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),t(l,null,{default:s(()=>[t(r,{type:"primary",onClick:S},{default:s(()=>[b(" 搜索 ")]),_:1})]),_:1})]),_:1},8,["model"])]),t(B,null,{default:s(()=>[t(P,{data:m.data,style:{width:"100%"},border:""},{default:s(()=>[t(g,{prop:"projectId",label:"id",width:"50"}),t(g,{prop:"projectName",label:"项目名称"}),t(g,{prop:"projectName",label:"导出文件"},{default:s(n=>[t(r,{size:"small",onClick:E=>k(n.row.projectId)},{default:s(()=>[b("导出json")]),_:2},1032,["onClick"]),t(r,{size:"small",onClick:E=>N(n.row.projectId)},{default:s(()=>[b("导出Excel")]),_:2},1032,["onClick"])]),_:1}),t(g,{width:"200",label:"翻译进度"},{default:s(n=>[t(I,{percentage:y(n.row.notCompleted,n.row.completed)},null,8,["percentage"])]),_:1})]),_:1},8,["data"]),x("div",A,[t($,{"current-page":d.value,"onUpdate:currentPage":e[1]||(e[1]=n=>d.value=n),"page-size":_.value,"onUpdate:pageSize":e[2]||(e[2]=n=>_.value=n),"page-sizes":[10,20,50,100],small:C.value,disabled:z.value,background:w.value,layout:"total, sizes, prev, pager, next, jumper",total:m.total,onSizeChange:V,onCurrentChange:F},null,8,["current-page","page-size","small","disabled","background","total"])])]),_:1})])}}});const O=M(G,[["__scopeId","data-v-2043f34e"]]);export{O as default};
