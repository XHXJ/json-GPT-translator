import{p as M,f as R}from"./query-e21a8e02.js";import{d as T,a as d,z as L,r as z,o as $,b as s,c as A,e as m,f as e,w as o,g as G,h as I,p as H,i as J,_ as K}from"./index-07f16b63.js";const y=f=>(H("data-v-6cfa6233"),f=f(),J(),f),O={class:"form"},Q=y(()=>m("h4",{class:"table-name"},"翻译查询:",-1)),W=y(()=>m("h3",null,"文件列表:",-1)),X={class:"pagination"},Y=T({name:"project",__name:"index",setup(f){const p=d(1),u=d(10),N=d(!1),S=d(!1),k=d(!1),V=L(),g=z({data:[],total:0}),r=z({projectName:""}),b=(a,t,n)=>M({pageNum:a,pageSize:t,...n}).then(_=>{g.data=_.data.records,g.total=_.data.total}),v=d(new Map),P=async(a,t)=>{t.length>0&&await R({projectId:a.projectId}).then(n=>{n.code===0&&v.value.set(a.projectId,n.data)})},B=()=>{b(p.value,u.value,r)},D=a=>{b(p.value,a,r)},U=a=>{b(a,u.value,r)},q=(a,t)=>{V.push({name:"translate",query:{projectId:a,fileId:t}})},h=(a,t)=>{const n=a+t;return n===0?0:(t/n*100).toFixed(2)};return $(()=>{b(p.value,u.value,r)}),(a,t)=>{const n=s("el-input"),_=s("el-form-item"),w=s("el-button"),E=s("el-form"),c=s("el-table-column"),C=s("el-progress"),x=s("el-table"),j=s("el-card"),F=s("el-pagination");return G(),A("div",null,[m("div",O,[e(E,{ref:"formRef",inline:!0,model:r,class:"bg-bg_color w-[99/100] pl-8 pt-4"},{default:o(()=>[e(_,{label:"项目名称：",prop:"projectName"},{default:o(()=>[e(n,{modelValue:r.projectName,"onUpdate:modelValue":t[0]||(t[0]=l=>r.projectName=l),placeholder:"输入查询项目名称",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),e(_,null,{default:o(()=>[e(w,{type:"primary",onClick:B},{default:o(()=>[I(" 搜索 ")]),_:1})]),_:1})]),_:1},8,["model"])]),e(j,null,{default:o(()=>[Q,e(x,{data:g.data,style:{width:"100%"},border:"",onExpandChange:P},{default:o(()=>[e(c,{type:"expand"},{default:o(l=>[e(j,null,{default:o(()=>[m("div",null,[W,e(x,{data:v.value.get(l.row.projectId),border:!1},{default:o(()=>[e(c,{label:"文件名",prop:"fileName"}),e(c,{width:"200",label:"翻译进度"},{default:o(i=>[e(C,{percentage:h(i.row.notCompleted,i.row.completed)},null,8,["percentage"])]),_:1}),e(c,{label:"操作"},{default:o(i=>[e(w,{size:"small",onClick:Z=>q(i.row.projectId,i.row.fileId)},{default:o(()=>[I("查看翻译 ")]),_:2},1032,["onClick"])]),_:1})]),_:2},1032,["data"])])]),_:2},1024)]),_:1}),e(c,{prop:"projectId",label:"id",width:"50"}),e(c,{prop:"projectName",label:"项目名称"}),e(c,{width:"200",label:"翻译进度"},{default:o(l=>[e(C,{percentage:h(l.row.notCompleted,l.row.completed)},null,8,["percentage"])]),_:1})]),_:1},8,["data"]),m("div",X,[e(F,{"current-page":p.value,"onUpdate:currentPage":t[1]||(t[1]=l=>p.value=l),"page-size":u.value,"onUpdate:pageSize":t[2]||(t[2]=l=>u.value=l),"page-sizes":[10,20,50,100],small:N.value,disabled:k.value,background:S.value,layout:"total, sizes, prev, pager, next, jumper",total:g.total,onSizeChange:D,onCurrentChange:U},null,8,["current-page","page-size","small","disabled","background","total"])])]),_:1})])}}});const ae=K(Y,[["__scopeId","data-v-6cfa6233"]]);export{ae as default};
